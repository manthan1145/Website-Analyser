var app=angular.module('esferasoft',['ui.router','ui.router.metatags']).run(['$rootScope','MetaTags',runBlock]);function runBlock($rootScope,MetaTags){$rootScope.MetaTags=MetaTags;}function configure(UIRouterMetatagsProvider){UIRouterMetatagsProvider.setTitlePrefix('prefix - ').setTitleSuffix(' | MyApp').setDefaultTitle('MyApp').setDefaultDescription('description').setDefaultKeywords('keywords').setStaticProperties({'fb:app_id':'your fb app id','og:site_name':'your site name'}).setOGURL(true);}app.constant('config',{api_url:"http://www.esferasoft.com/api/",blog_api_url:"http://myperfectdating.com.cp-in-9.webhostbox.net/wordpress/",per_page:3});app.directive('fileModel',['$parse',function($parse){return{restrict:'A',link:function(scope,element,attrs){var model=$parse(attrs.fileModel);var modelSetter=model.assign;scope.fileList=[];var _files=[];element.bind('change',function(){scope.$apply(function(){angular.forEach(element[0].files,function(file){_files.push(file);scope.fileList.push(file.name)})
modelSetter(scope,_files);});});}};}]);app.controller('ApplicationController',function($scope,$timeout,$sce,$filter,$http,$rootScope,config,$state){$scope.shareLink=function(url,w,post){if(w==undefined)w=400;if($state.current.name=='blog_details'){var link=$state.href('blog_details',{},{absolute:true});n=link.lastIndexOf("/");slug=link.substring(n+1,link.length);var title=$rootScope.MetaTags.title;var image=post.post_thumbnail;var description=$rootScope.MetaTags.description;var data_link=url+link;window.open(data_link,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=150,left=200,width="+w+",height=500");}}
$scope.share_blog_from_listing_page=function(url,w,blog_url,post){if(w==undefined)w=400;if($state.current.name=='blog'){var link=blog_url;n=link.lastIndexOf("/");slug=link.substring(n+1,link.length);var title=post.post_title;var image=post.post_thumbnail;var description=post.post_excerpt;var data_link=url+link;window.open(data_link,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,top=150,left=200,width="+w+",height=500");}}
$scope.loader={};$scope.loader.is_transition=false;$rootScope.$on("$stateChangeStart",function(event,toState,fromState){$scope.loader.is_transition=true;});$scope.email={};$rootScope.loading_value=false;$scope.all_updates_subscribe=function(is_valid){if(!is_valid)return false;$rootScope.loading_value=true;$http.post(config.api_url+'subscribe.php',$scope.email).then(function(response){$scope.res=response.data;$scope.hide_element=true;$timeout(function(){$scope.hide_element=false;},10000);$rootScope.loading_value=false;$scope.email={};});};$rootScope.$on("$stateChangeSuccess",function(event,toState,fromState){if($(".navbar-collapse").hasClass("in")){$(".navbar-collapse").removeClass("in");}$scope.loader.is_transition=false;document.body.scrollTop=document.documentElement.scrollTop=0;$timeout(function(){esferaJS();});$scope.date_modifier=function(date){date=new Date(date);return date;};$scope.trustAsHtml=function(string){return $sce.trustAsHtml(string);};$scope.dateDiff=function(date){if(date!=""&&date!=undefined){var utc_current_date=new Date();var utc_date=new Date(date);var diff_date=utc_current_date-utc_date;var years=Math.floor(diff_date/31536000000);var months=Math.floor((diff_date%31536000000)/2628000000);var days=Math.floor(((diff_date%31536000000)%2628000000)/86400000);total_years=years==0?"":(years+" year(s)");total_months=months==0?"":(months+" month(s) and ");if(days!=0){response=total_years+total_months+days+" day(s) ago";}else{response="Today";}}else{response="";}return response;}});});